function udef = diffDefEnergy_noDamp(q,s,EA,EI)

udef = MexdiffDefEnergy([q' s]',EA,EI);

% rx1 = q(1);  ry1  = q(2); rz1 = q(3); rx2 = q(4); ry2 = q(5); rz2  = q(6);
% qx1 = q(7); qx2  = q(8); qx3  = q(9); qy1  = q(10); qy2  = q(11); qy3  = q(12); qz1  = q(13); qz2  = q(14); qz3  = q(15);
% s1 = q(16); s2 = q(17);
% 
% t2 = pi.^2;
% t4 = -rx2;
% t5 = -ry2;
% t6 = -rz2;
% t7 = -s1;
% t8 = -s2;
% t3 = t2.^2;
% t9 = rx1+t4;
% t10 = ry1+t5;
% t11 = rz1+t6;
% t12 = s+t7;
% t13 = s1+t8;
% t14 = t9.^2;
% t15 = t10.^2;
% t16 = t11.^2;
% t17 = 1.0./t13;
% t18 = t17.^2;
% t20 = rx1.*t17;
% t21 = rx2.*t17;
% t22 = ry1.*t17;
% t23 = ry2.*t17;
% t24 = rz1.*t17;
% t25 = rz2.*t17;
% t26 = t4.*t17;
% t27 = t5.*t17;
% t28 = t6.*t17;
% t29 = t12.*t17.*pi;
% t44 = t14+t15+t16;
% t19 = t18.^2;
% t30 = t29.*2.0;
% t31 = t29.*3.0;
% t32 = cos(t29);
% t33 = sin(t29);
% t45 = 1.0./sqrt(t44);
% t34 = cos(t30);
% t35 = cos(t31);
% t36 = sin(t30);
% t37 = sin(t31);
% t38 = t32.^2;
% t39 = t33.^2;
% t46 = qx1.*t9.*t17.*t32.*t45.*pi;
% t47 = qx1.*t10.*t17.*t32.*t45.*pi;
% t48 = qx1.*t11.*t17.*t32.*t45.*pi;
% t40 = t34.^2;
% t41 = t35.^2;
% t42 = t36.^2;
% t43 = t37.^2;
% t49 = qx2.*t9.*t17.*t34.*t45.*pi.*2.0;
% t50 = qx3.*t9.*t17.*t35.*t45.*pi.*3.0;
% t51 = qx2.*t10.*t17.*t34.*t45.*pi.*2.0;
% t52 = qx3.*t10.*t17.*t35.*t45.*pi.*3.0;
% t53 = qx2.*t11.*t17.*t34.*t45.*pi.*2.0;
% t54 = qx3.*t11.*t17.*t35.*t45.*pi.*3.0;
% t55 = t20+t26+t46+t49+t50;
% t56 = t22+t27+t47+t51+t52;
% t57 = t24+t28+t48+t53+t54;
% t58 = t55.^2;
% t59 = t56.^2;
% t60 = t57.^2;
% t61 = t58./2.0;
% t62 = t59./2.0;
% t63 = t60./2.0;
% t64 = t61+t62+t63-1.0./2.0;
% udef = qy1.*((EI.*qy1.*t3.*t19.*t39)./2.0+EI.*qy2.*t3.*t19.*t33.*t36.*2.0+EI.*qy3.*t3.*t19.*t33.*t37.*(9.0./2.0))+qy2.*(EI.*qy2.*t3.*t19.*t42.*8.0+EI.*qy1.*t3.*t19.*t33.*t36.*2.0+EI.*qy3.*t3.*t19.*t36.*t37.*1.8e+1)+qy3.*(EI.*qy3.*t3.*t19.*t43.*(8.1e+1./2.0)+EI.*qy1.*t3.*t19.*t33.*t37.*(9.0./2.0)+EI.*qy2.*t3.*t19.*t36.*t37.*1.8e+1)+qz1.*((EI.*qz1.*t3.*t19.*t39)./2.0+EI.*qz2.*t3.*t19.*t33.*t36.*2.0+EI.*qz3.*t3.*t19.*t33.*t37.*(9.0./2.0))+qz2.*(EI.*qz2.*t3.*t19.*t42.*8.0+EI.*qz1.*t3.*t19.*t33.*t36.*2.0+EI.*qz3.*t3.*t19.*t36.*t37.*1.8e+1)+qz3.*(EI.*qz3.*t3.*t19.*t43.*(8.1e+1./2.0)+EI.*qz1.*t3.*t19.*t33.*t37.*(9.0./2.0)+EI.*qz2.*t3.*t19.*t36.*t37.*1.8e+1)+(EA.*t64.^2)./2.0+qy1.*((EA.*qy1.*t2.*t18.*t38.*t64)./2.0+EA.*qy2.*t2.*t18.*t32.*t34.*t64+EA.*qy3.*t2.*t18.*t32.*t35.*t64.*(3.0./2.0))+qy2.*(EA.*qy2.*t2.*t18.*t40.*t64.*2.0+EA.*qy1.*t2.*t18.*t32.*t34.*t64+EA.*qy3.*t2.*t18.*t34.*t35.*t64.*3.0)+qy3.*(EA.*qy3.*t2.*t18.*t41.*t64.*(9.0./2.0)+EA.*qy1.*t2.*t18.*t32.*t35.*t64.*(3.0./2.0)+EA.*qy2.*t2.*t18.*t34.*t35.*t64.*3.0)+qz1.*((EA.*qz1.*t2.*t18.*t38.*t64)./2.0+EA.*qz2.*t2.*t18.*t32.*t34.*t64+EA.*qz3.*t2.*t18.*t32.*t35.*t64.*(3.0./2.0))+qz2.*(EA.*qz2.*t2.*t18.*t40.*t64.*2.0+EA.*qz1.*t2.*t18.*t32.*t34.*t64+EA.*qz3.*t2.*t18.*t34.*t35.*t64.*3.0)+qz3.*(EA.*qz3.*t2.*t18.*t41.*t64.*(9.0./2.0)+EA.*qz1.*t2.*t18.*t32.*t35.*t64.*(3.0./2.0)+EA.*qz2.*t2.*t18.*t34.*t35.*t64.*3.0);
